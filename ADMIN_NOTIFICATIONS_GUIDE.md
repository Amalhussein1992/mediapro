# ุฏููู ุฅุฏุงุฑุฉ ุงูุฅุดุนุงุฑุงุช - Admin Notifications Management Guide

## ูุธุฑุฉ ุนุงูุฉ - Overview

ุชู ุชูุนูู ูุธุงู ุงูุฅุดุนุงุฑุงุช ุจุงููุงูู ุงูุฐู ูุณูุญ ููุฃุฏูู ุจุฅุฑุณุงู ุฅุดุนุงุฑุงุช push ูููุณุชุฎุฏููู ูุจุงุดุฑุฉ ูู ุงูุจุงู ุงูุฏ.

The notification system is fully enabled allowing admins to send push notifications to users directly from the backend.

---

## API Endpoints ููุฃุฏูู - Admin API Endpoints

ุฌููุน ุงูู endpoints ุงูุชุงููุฉ ุชุชุทูุจ ุตูุงุญูุงุช ุฃุฏูู (`role:admin`)

All the following endpoints require admin role (`role:admin`)

**Base URL**: `http://localhost:8000/api/admin/v2/notifications`

### 1๏ธโฃ ุฅุญุตุงุฆูุงุช ุงูุฅุดุนุงุฑุงุช - Get Notification Statistics

```http
GET /api/admin/v2/notifications/stats
Authorization: Bearer {admin_token}
```

**Response:**
```json
{
  "success": true,
  "data": {
    "total_notifications": 150,
    "unread_notifications": 45,
    "notifications_today": 12,
    "notifications_this_week": 67,
    "users_with_push_tokens": 85,
    "total_users": 100,
    "recent_notifications": [...],
    "notifications_by_type": [
      {"type": "welcome", "count": 20},
      {"type": "promotion", "count": 15}
    ]
  }
}
```

---

### 2๏ธโฃ ุนุฑุถ ุฌููุน ุงูุฅุดุนุงุฑุงุช - Get All Notifications

```http
GET /api/admin/v2/notifications/all?per_page=20&type=welcome&user_id=5
Authorization: Bearer {admin_token}
```

**Query Parameters:**
- `per_page` (optional): ุนุฏุฏ ุงููุชุงุฆุฌ ููู ุตูุญุฉ
- `type` (optional): ููุชุฑ ุญุณุจ ููุน ุงูุฅุดุนุงุฑ
- `user_id` (optional): ููุชุฑ ุญุณุจ ุงููุณุชุฎุฏู

---

### 3๏ธโฃ ุงูููุงูุจ ุงูุฌุงูุฒุฉ - Get Notification Templates

```http
GET /api/admin/v2/notifications/templates
Authorization: Bearer {admin_token}
```

**Response:**
```json
{
  "success": true,
  "data": [
    {
      "id": "welcome",
      "name": "ุฑุณุงูุฉ ุชุฑุญูุจ - Welcome Message",
      "title": "ูุฑุญุจุงู ุจู! - Welcome!",
      "message": "ูุญู ุณุนุฏุงุก ุจุงูุถูุงูู ุฅูููุง!",
      "type": "welcome",
      "priority": "normal"
    },
    {
      "id": "update",
      "name": "ุชุญุฏูุซ ุงูุชุทุจูู - App Update",
      "title": "ุชุญุฏูุซ ุฌุฏูุฏ ูุชุงุญ - New Update Available",
      "message": "ุฅุตุฏุงุฑ ุฌุฏูุฏ ูู ุงูุชุทุจูู ูุชุงุญ ุงูุขู!",
      "type": "update",
      "priority": "high"
    }
  ]
}
```

**ุงูููุงูุจ ุงููุชููุฑุฉ - Available Templates:**
- โ **welcome** - ุฑุณุงูุฉ ุชุฑุญูุจ
- ๐ **update** - ุชุญุฏูุซ ุงูุชุทุจูู
- ๐ง **maintenance** - ุตูุงูุฉ ูุฌุฏููุฉ
- ๐ **promotion** - ุนุฑุถ ุชุฑููุฌู
- ๐ **reminder** - ุชุฐููุฑ

---

### 4๏ธโฃ ุฅุฑุณุงู ุฅุดุนุงุฑ ููุณุชุฎุฏู ูุงุญุฏ - Send to Single User

```http
POST /api/admin/v2/notifications/send-to-user
Authorization: Bearer {admin_token}
Content-Type: application/json

{
  "user_id": 5,
  "title": "ูุฑุญุจุงู ุจู!",
  "message": "ูุญู ุณุนุฏุงุก ุจุงูุถูุงูู ุฅูู ุงูุชุทุจูู",
  "type": "welcome",
  "priority": "normal",
  "action_url": "/profile",
  "data": {
    "custom_field": "value"
  }
}
```

**Parameters:**
- `user_id` (required): ุฑูู ุงููุณุชุฎุฏู
- `title` (required): ุนููุงู ุงูุฅุดุนุงุฑ
- `message` (required): ูุต ุงูุฅุดุนุงุฑ
- `type` (optional): ููุน ุงูุฅุดุนุงุฑ (default: admin_message)
- `priority` (optional): low, normal, high, urgent (default: normal)
- `action_url` (optional): ุฑุงุจุท ุนูุฏ ุงูุถุบุท ุนูู ุงูุฅุดุนุงุฑ
- `data` (optional): ุจูุงูุงุช ุฅุถุงููุฉ

**Response:**
```json
{
  "success": true,
  "message": "Notification sent successfully"
}
```

---

### 5๏ธโฃ ุฅุฑุณุงู ุฅุดุนุงุฑ ูุนุฏุฉ ูุณุชุฎุฏููู - Send to Multiple Users

```http
POST /api/admin/v2/notifications/send-to-multiple
Authorization: Bearer {admin_token}
Content-Type: application/json

{
  "user_ids": [1, 2, 3, 5, 8],
  "title": "ุนุฑุถ ุฎุงุต!",
  "message": "ูุง ุชููุช ุงูุนุฑุถ ุงูุฎุงุต ููุชุฑุฉ ูุญุฏูุฏุฉ",
  "type": "promotion",
  "priority": "high"
}
```

**Parameters:**
- `user_ids` (required): ูุตูููุฉ ุฃุฑูุงู ุงููุณุชุฎุฏููู
- ุจุงูู ุงูุญููู ููุณูุง ูุงูุฅุฑุณุงู ููุณุชุฎุฏู ูุงุญุฏ

**Response:**
```json
{
  "success": true,
  "message": "Sent to 4 users, failed for 1 users",
  "sent_count": 4,
  "failed_count": 1
}
```

---

### 6๏ธโฃ ุฅุฑุณุงู ุฅุดุนุงุฑ ุฌูุงุนู ููู ุงููุณุชุฎุฏููู - Broadcast to All Users

```http
POST /api/admin/v2/notifications/send-to-all
Authorization: Bearer {admin_token}
Content-Type: application/json

{
  "title": "ุชุญุฏูุซ ุฌุฏูุฏ ูุชุงุญ",
  "message": "ุฅุตุฏุงุฑ ุฌุฏูุฏ ูู ุงูุชุทุจูู ูุชุงุญ ุงูุขู! ูุฑุฌู ุงูุชุญุฏูุซ ููุญุตูู ุนูู ุฃุญุฏุซ ุงูููุฒุงุช",
  "type": "update",
  "priority": "high",
  "only_active": true
}
```

**Parameters:**
- `only_active` (optional): ุฅุฐุง ูุงู `true` ุณูุฑุณู ููุท ูููุณุชุฎุฏููู ุงููุดุทูู (ุขุฎุฑ ุชุณุฌูู ุฏุฎูู ุฎูุงู 30 ููู)

**Response:**
```json
{
  "success": true,
  "message": "Broadcast sent to 82 users, failed for 3 users",
  "total_users": 85,
  "sent_count": 82,
  "failed_count": 3
}
```

---

### 7๏ธโฃ ุญุฐู ุฅุดุนุงุฑ - Delete Notification

```http
DELETE /api/admin/v2/notifications/{notification_id}
Authorization: Bearer {admin_token}
```

**Response:**
```json
{
  "success": true,
  "message": "Notification deleted successfully"
}
```

---

## ุฃูุซูุฉ ุงุณุชุฎุฏุงู - Usage Examples

### ูุซุงู 1: ุฅุฑุณุงู ุฑุณุงูุฉ ุชุฑุญูุจ ููุณุชุฎุฏู ุฌุฏูุฏ

```bash
curl -X POST http://localhost:8000/api/admin/v2/notifications/send-to-user \
  -H "Authorization: Bearer YOUR_ADMIN_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "user_id": 10,
    "title": "ูุฑุญุจุงู ุจู ูู ุชุทุจูููุง!",
    "message": "ูุญู ุณุนุฏุงุก ุจุงูุถูุงูู. ุงุจุฏุฃ ุฑุญูุชู ุงูุขู!",
    "type": "welcome",
    "priority": "normal"
  }'
```

### ูุซุงู 2: ุฅุฑุณุงู ุฅุดุนุงุฑ ุตูุงูุฉ ูุฌููุน ุงููุณุชุฎุฏููู

```bash
curl -X POST http://localhost:8000/api/admin/v2/notifications/send-to-all \
  -H "Authorization: Bearer YOUR_ADMIN_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "title": "ุตูุงูุฉ ูุฌุฏููุฉ",
    "message": "ุณูููู ุงูุชุทุจูู ุชุญุช ุงูุตูุงูุฉ ูู ุงูุณุงุนุฉ 2 ุตุจุงุญุงู ุญุชู 4 ุตุจุงุญุงู",
    "type": "maintenance",
    "priority": "urgent",
    "only_active": true
  }'
```

### ูุซุงู 3: ุฅุฑุณุงู ุนุฑุถ ุชุฑููุฌู ููุฌููุนุฉ ูุณุชุฎุฏููู

```bash
curl -X POST http://localhost:8000/api/admin/v2/notifications/send-to-multiple \
  -H "Authorization: Bearer YOUR_ADMIN_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "user_ids": [1, 2, 5, 8, 12],
    "title": "ุนุฑุถ ุฎุงุต ูู!",
    "message": "ุฎุตู 50% ููุชุฑุฉ ูุญุฏูุฏุฉ ุนูู ุฌููุน ุงูุจุงูุงุช",
    "type": "promotion",
    "priority": "high",
    "action_url": "/subscriptions"
  }'
```

---

## ููููุฉ ุงูุญุตูู ุนูู Admin Token

### ุงูุทุฑููุฉ 1: ุชุณุฌูู ุฏุฎูู ูุฃุฏูู

```bash
curl -X POST http://localhost:8000/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{
    "email": "admin@example.com",
    "password": "your_password"
  }'
```

### ุงูุทุฑููุฉ 2: ุฅูุดุงุก ุฃุฏูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

```bash
cd backend-laravel
php artisan tinker

# ูู Tinker:
$user = User::create([
    'name' => 'Admin',
    'email' => 'admin@socialapp.com',
    'password' => bcrypt('admin123'),
    'role' => 'admin'
]);
```

---

## ุฃููุงุน ุงูุฅุดุนุงุฑุงุช - Notification Types

| Type | ุงูุงุณู ุจุงูุนุฑุจู | ุงูุงุณุชุฎุฏุงู |
|------|--------------|-----------|
| `welcome` | ุฑุณุงูุฉ ุชุฑุญูุจ | ุนูุฏ ุชุณุฌูู ูุณุชุฎุฏู ุฌุฏูุฏ |
| `update` | ุชุญุฏูุซ | ุฅุตุฏุงุฑ ุฌุฏูุฏ ูู ุงูุชุทุจูู |
| `maintenance` | ุตูุงูุฉ | ุฅุดุนุงุฑ ุจุตูุงูุฉ ูุฌุฏููุฉ |
| `promotion` | ุนุฑุถ ุชุฑููุฌู | ุนุฑูุถ ูุฎุตููุงุช |
| `reminder` | ุชุฐููุฑ | ุชุฐููุฑ ุจููุงู ุฃู ุฃุญุฏุงุซ |
| `admin_message` | ุฑุณุงูุฉ ูู ุงูุฅุฏุงุฑุฉ | ุฑุณุงุฆู ุนุงูุฉ |
| `broadcast` | ุฅุฐุงุนุฉ | ุฑุณุงุฆู ุฌูุงุนูุฉ |

---

## ูุณุชููุงุช ุงูุฃููููุฉ - Priority Levels

| Priority | ุงููุตู | ุงูุงุณุชุฎุฏุงู |
|----------|-------|----------|
| `low` | ููุฎูุถ | ุฅุดุนุงุฑุงุช ุบูุฑ ุนุงุฌูุฉ |
| `normal` | ุนุงุฏู | ุฅุดุนุงุฑุงุช ุนุงูุฉ (default) |
| `high` | ุนุงูู | ุฅุดุนุงุฑุงุช ูููุฉ |
| `urgent` | ุนุงุฌู | ุฅุดุนุงุฑุงุช ุญุฑุฌุฉ ุชุชุทูุจ ุงูุชุจุงู ููุฑู |

---

## ููุงุญุธุงุช ูููุฉ - Important Notes

1. **Push Tokens**: ุงููุณุชุฎุฏููู ูุฌุจ ุฃู ูููู ูุฏููู push token ูุณุฌู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
2. **ุงูุตูุงุญูุงุช**: ุฌููุน endpoints ุชุชุทูุจ ุตูุงุญูุงุช admin
3. **ุงูุฅุญุตุงุฆูุงุช**: ููููู ูุชุงุจุนุฉ ุนุฏุฏ ุงูุฅุดุนุงุฑุงุช ุงููุฑุณูุฉ ูุงูููุฑูุกุฉ
4. **ุงูุชูุทูู**: ููููู ุฅุฑุณุงู ุงูุฅุดุนุงุฑุงุช ุจุงูุนุฑุจูุฉ ุฃู ุงูุฅูุฌููุฒูุฉ
5. **Custom Data**: ููููู ุฅุฑุณุงู ุจูุงูุงุช ุฅุถุงููุฉ ูุน ุงูุฅุดุนุงุฑ ูู ุญูู `data`

---

## ุงููููุงุช ุงููุฑุชุจุทุฉ - Related Files

- **Controller**: `backend-laravel/app/Http/Controllers/API/AdminNotificationController.php`
- **Service**: `backend-laravel/app/Services/PushNotificationService.php`
- **Model**: `backend-laravel/app/Models/Notification.php`
- **Routes**: `backend-laravel/routes/api.php` (line 228-237)
- **Frontend Service**: `SocialMediaManager/src/services/notificationService.ts`

---

## ุงูุฏุนู ูุงููุณุงุนุฏุฉ - Support

ุฅุฐุง ูุงุฌูุช ุฃู ูุดููุฉ:
1. ุชุญูู ูู ุฃู ุงููุณุชุฎุฏู ูุฏูู push token ูุณุฌู
2. ุชุญูู ูู ุตูุงุญูุงุช ุงูุฃุฏูู
3. ุฑุงุฌุน ุงูู logs ูู Laravel: `storage/logs/laravel.log`
4. ุชุญูู ูู ุฃู ุงูุจุงู ุงูุฏ ูุนูู ุนูู `http://localhost:8000`

---

## ุฃูุซูุฉ ูุชูุฏูุฉ - Advanced Examples

### ุฅุฑุณุงู ุฅุดุนุงุฑ ูุน ุจูุงูุงุช ูุฎุตุตุฉ

```json
{
  "user_id": 5,
  "title": "ููุดูุฑ ุฌุฏูุฏ",
  "message": "ูุฏูู ููุดูุฑ ุฌุฏูุฏ ุฌุงูุฒ ูููุดุฑ",
  "type": "reminder",
  "priority": "normal",
  "action_url": "/posts/123",
  "data": {
    "post_id": 123,
    "post_type": "instagram",
    "scheduled_time": "2025-10-18 10:00:00"
  }
}
```

### ุฅุญุตุงุฆูุงุช ูุชูุฏูุฉ

```javascript
// ูู Frontend ููููู ุงุณุชุฎุฏุงู:
import api from './services/api';

const stats = await api.get('/admin/v2/notifications/stats');
console.log('ุนุฏุฏ ุงููุณุชุฎุฏููู ุงูุฐูู ูุฏููู push tokens:', stats.data.users_with_push_tokens);
console.log('ุงูุฅุดุนุงุฑุงุช ุงูููู:', stats.data.notifications_today);
```

---

## โ ุงููุธุงู ุฌุงูุฒ ููุงุณุชุฎุฏุงู

ูุธุงู ุงูุฅุดุนุงุฑุงุช ุงูุขู ููุนู ุจุงููุงูู ูููููู:
- โ ุฅุฑุณุงู ุฅุดุนุงุฑุงุช ููุณุชุฎุฏู ูุงุญุฏ
- โ ุฅุฑุณุงู ุฅุดุนุงุฑุงุช ูุนุฏุฉ ูุณุชุฎุฏููู
- โ ุฅุฑุณุงู ุฅุดุนุงุฑุงุช ุฌูุงุนูุฉ ูุฌููุน ุงููุณุชุฎุฏููู
- โ ุงุณุชุฎุฏุงู ููุงูุจ ุฌุงูุฒุฉ
- โ ูุชุงุจุนุฉ ุงูุฅุญุตุงุฆูุงุช
- โ ุฅุฏุงุฑุฉ ุงูุฅุดุนุงุฑุงุช ูู ุงูุจุงู ุงูุฏ ุจุงููุงูู

**ูุง ุชุญุชุงุฌ ูุฃู ุชุนุฏููุงุช ูู ุงููุฑููุช ุงูุฏ - ูู ุดูุก ูุฏุงุฑ ูู ุงูุจุงู ุงูุฏ!**
